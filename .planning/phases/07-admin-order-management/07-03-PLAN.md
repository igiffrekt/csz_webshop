---
phase: 07-admin-order-management
plan: 03
type: execute
wave: 2
depends_on: [07-01, 07-02]
files_modified:
  - .planning/phases/07-admin-order-management/07-VERIFICATION.md
autonomous: false
user_setup:
  - service: strapi
    why: "Admin testing requires running Strapi"
    instructions:
      - task: "Start Strapi CMS"
        command: "cd apps/cms && pnpm dev"

must_haves:
  truths:
    - "All ADMN-10 through ADMN-14 requirements verified"
    - "Admin can view, filter, and update orders"
    - "Customer sees status updates"
  artifacts:
    - path: ".planning/phases/07-admin-order-management/07-VERIFICATION.md"
      provides: "Phase verification results"
      contains: "ADMN-10"
---

<objective>
Verify all Phase 7 requirements for Admin Order Management.

Purpose: Confirm ADMN-10 through ADMN-14 are fully implemented and working.

Output: Complete verification document with all requirements signed off.
</objective>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Admin Order Management in Strapi:
- Order list view with status, date, customer, total columns
- Filters for status, date range
- Order detail view with all fields
- Status update with email notification
- User information accessible from order
  </what-built>
  <how-to-verify>
**Prerequisites:**
1. Start Strapi: `cd apps/cms && pnpm dev`
2. Start Web (for customer verification): `cd apps/web && pnpm dev`
3. Have at least one order in the system (from Phase 6 testing)

**Test ADMN-10: Admin can view all orders**
1. Log in to Strapi admin (http://localhost:1337/admin)
2. Go to Content Manager > Orders
3. Verify all orders display in list
4. Verify columns show: orderNumber, status, total, createdAt

**Test ADMN-11: Admin can filter orders by status, date, customer**
1. In Orders list, click "Filters"
2. Add filter: status = "pending"
3. Verify only pending orders show
4. Clear filter, add filter: status = "paid"
5. Verify filtering works
6. Test date filtering if orders exist from different dates

**Test ADMN-12: Admin can view order details**
1. Click on any order in the list
2. Verify edit view shows:
   - Order number
   - Status (editable dropdown)
   - User relation
   - All pricing (subtotal, discount, shipping, VAT, total)
   - Shipping address (JSON viewer)
   - Billing address (JSON viewer)
   - Line items (JSON viewer)
   - Payment info (method, ID, paidAt)

**Test ADMN-13: Admin can update order status**
1. In order edit view, change status dropdown
2. Click Save
3. Verify status saved
4. If changed to "shipped", check Strapi logs for email notification

**Test ADMN-14: Admin can view customer information for order**
1. In order edit view, find the "user" relation field
2. Click to view/expand user info
3. Verify customer email visible
4. Optionally click through to user profile

**Test customer sees status update**
1. Log in to web app as the customer
2. Go to /fiok/rendelesek
3. Verify updated status displays correctly
  </how-to-verify>
  <resume-signal>Type "verified" with any issues found, or "verified - all pass" if complete</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Create verification document</name>
  <files>.planning/phases/07-admin-order-management/07-VERIFICATION.md</files>
  <action>
Create verification document based on checkpoint results.

Document should include:
- All ADMN-10 through ADMN-14 requirement status
- Any issues found and resolutions
- Sign-off checklist
  </action>
  <verify>
    - VERIFICATION.md created
    - All requirements documented
    - Phase complete
  </verify>
  <done>Phase verification document created</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. All 5 ADMN requirements verified (ADMN-10 through ADMN-14)
2. Verification document created
3. No blocking issues remain

Requirements covered in this phase:
- ADMN-10: Admin can view all orders
- ADMN-11: Admin can filter orders by status, date, customer
- ADMN-12: Admin can view order details
- ADMN-13: Admin can update order status
- ADMN-14: Admin can view customer information for order

Total: 5 requirements
</verification>

<success_criteria>
- All ADMN-10 through ADMN-14 requirements pass verification
- Status changes visible to customers
- Email notifications work for shipped orders
- VERIFICATION.md documents all results
</success_criteria>
