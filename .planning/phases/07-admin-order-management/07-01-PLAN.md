---
phase: 07-admin-order-management
plan: 01
type: execute
wave: 1
depends_on: [06-08]
files_modified:
  - apps/cms/src/api/order/content-types/order/schema.json
autonomous: true

must_haves:
  truths:
    - "Admin can view all orders in Strapi admin"
    - "Order list shows status, date, customer email, and total"
    - "Admin can filter orders by status"
    - "Admin can view order details including line items and addresses"
  artifacts:
    - path: "apps/cms/src/api/order/content-types/order/schema.json"
      provides: "Order content type with admin config"
      contains: "pluginOptions"
---

<objective>
Configure Strapi Order content type for optimal admin experience.

Purpose: ADMN-10 (view all orders), ADMN-11 (filter orders), ADMN-12 (view details). Strapi already provides these features; this plan configures them for best UX.

Output: Configured Order admin view with proper columns, filters, and field organization.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Update Order schema with admin configuration</name>
  <files>
    apps/cms/src/api/order/content-types/order/schema.json
  </files>
  <action>
Update the Order schema to add pluginOptions for better admin list view.

The schema should configure:
1. Main field display (orderNumber)
2. Searchable fields (orderNumber, user email)
3. Default sort (createdAt descending)

Note: Strapi 5 uses the admin panel UI for most list view customization. The schema primarily defines field properties. The admin will automatically show all fields in edit view.

Verify in Strapi admin:
1. Go to Content Manager > Orders
2. Confirm list shows: orderNumber, status, total, createdAt, user
3. Confirm can filter by status
4. Confirm can sort by any column
5. Confirm clicking order shows all details
  </action>
  <verify>
    - Order list view shows useful columns
    - Status filter works
    - Order details view shows all fields
    - User relation is visible
  </verify>
  <done>Order admin view configured</done>
</task>

<task type="auto">
  <name>Task 2: Verify admin permissions</name>
  <files>none (verification only)</files>
  <action>
Verify that the Admin and Store Manager roles can access Order management:

1. Log in to Strapi admin as Super Admin
2. Go to Settings > Roles
3. Verify Admin role has full Order permissions
4. Verify Store Manager role has Order permissions (create, read, update, delete)

The permissions should already be configured from Phase 1 (01-05-PLAN.md) but verify they include the Order content type.

If permissions are missing:
1. Go to Settings > Roles > Store Manager
2. Under Application > Order, enable: find, findOne, create, update, delete
3. Save changes
  </action>
  <verify>
    - Admin can access Order content type
    - Store Manager can access Order content type
    - Both roles can view, edit, and update orders
  </verify>
  <done>Admin permissions verified</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Log in to Strapi admin (http://localhost:1337/admin)
2. Navigate to Content Manager > Orders
3. Verify order list displays properly
4. Create or view existing orders
5. Test status filter
6. Verify user information visible in order details

ADMN-10: ✓ Admin can view all orders
ADMN-11: ✓ Admin can filter orders (partial - status)
ADMN-12: ✓ Admin can view order details
</verification>

<success_criteria>
- Order list view shows: orderNumber, status, total, createdAt, user
- Status filter works in list view
- Order edit view shows all fields organized logically
- Admin and Store Manager roles have Order permissions
</success_criteria>
