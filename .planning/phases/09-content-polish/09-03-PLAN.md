---
phase: 09-content-polish
plan: 03
type: execute
wave: 2
depends_on: [09-01]
files_modified:
  - apps/web/src/app/[locale]/gyik/page.tsx
  - apps/web/src/components/faq/FAQAccordion.tsx
autonomous: true

must_haves:
  truths:
    - "FAQ page exists at /gyik"
    - "FAQs fetched from Strapi"
    - "Accordion UI for questions"
    - "Category grouping supported"
  artifacts:
    - path: "apps/web/src/app/[locale]/gyik/page.tsx"
      provides: "FAQ page"
      contains: "gyik"
---

<objective>
Create FAQ page with accordion component fetching from Strapi.

Purpose: CONT-05 (FAQ page with accordion).

Output: Interactive FAQ page with categorized questions.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Create FAQ Accordion component</name>
  <files>
    apps/web/src/components/faq/FAQAccordion.tsx
    apps/web/src/components/faq/index.ts
  </files>
  <action>
Create FAQ accordion component at `apps/web/src/components/faq/FAQAccordion.tsx`:

```typescript
'use client';

import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from '@/components/ui/accordion';
import type { FAQ } from '@/lib/content-api';

interface FAQAccordionProps {
  faqs: FAQ[];
  groupByCategory?: boolean;
}

export function FAQAccordion({ faqs, groupByCategory = false }: FAQAccordionProps) {
  if (!groupByCategory) {
    return (
      <Accordion type="single" collapsible className="w-full">
        {faqs.map((faq) => (
          <AccordionItem key={faq.documentId} value={faq.documentId}>
            <AccordionTrigger className="text-left">
              {faq.question}
            </AccordionTrigger>
            <AccordionContent>
              <div
                className="prose prose-sm max-w-none"
                dangerouslySetInnerHTML={{ __html: faq.answer }}
              />
            </AccordionContent>
          </AccordionItem>
        ))}
      </Accordion>
    );
  }

  // Group FAQs by category
  const grouped = faqs.reduce((acc, faq) => {
    const category = faq.category || 'Általános';
    if (!acc[category]) {
      acc[category] = [];
    }
    acc[category].push(faq);
    return acc;
  }, {} as Record<string, FAQ[]>);

  return (
    <div className="space-y-8">
      {Object.entries(grouped).map(([category, categoryFaqs]) => (
        <div key={category}>
          <h2 className="text-xl font-semibold mb-4">{category}</h2>
          <Accordion type="single" collapsible className="w-full">
            {categoryFaqs.map((faq) => (
              <AccordionItem key={faq.documentId} value={faq.documentId}>
                <AccordionTrigger className="text-left">
                  {faq.question}
                </AccordionTrigger>
                <AccordionContent>
                  <div
                    className="prose prose-sm max-w-none"
                    dangerouslySetInnerHTML={{ __html: faq.answer }}
                  />
                </AccordionContent>
              </AccordionItem>
            ))}
          </Accordion>
        </div>
      ))}
    </div>
  );
}
```

Create index file at `apps/web/src/components/faq/index.ts`:

```typescript
export { FAQAccordion } from './FAQAccordion';
```
  </action>
  <verify>
    - Accordion component renders FAQs
    - Category grouping works
    - Rich text answer displayed
  </verify>
  <done>FAQ Accordion component created</done>
</task>

<task type="auto">
  <name>Task 2: Create FAQ page</name>
  <files>
    apps/web/src/app/[locale]/gyik/page.tsx
  </files>
  <action>
Create FAQ page at `apps/web/src/app/[locale]/gyik/page.tsx`:

```typescript
import { getFAQs } from '@/lib/content-api';
import { FAQAccordion } from '@/components/faq';
import type { Metadata } from 'next';

export const metadata: Metadata = {
  title: 'Gyakran Ismételt Kérdések | CSZ Tűzvédelem',
  description: 'Válaszok a tűzvédelmi termékekkel kapcsolatos leggyakoribb kérdésekre',
};

export default async function FAQPage() {
  const faqs = await getFAQs();

  // Fallback FAQs if none in CMS
  const displayFaqs = faqs.length > 0 ? faqs : [
    {
      id: 1,
      documentId: 'faq-1',
      question: 'Milyen gyakran kell ellenőriztetni a tűzoltó készüléket?',
      answer: '<p>A tűzoltó készülékeket évente egyszer kötelező szakszervizzel ellenőriztetni. Az 5 évnél régebbi készülékeket pedig nagyjavításra kell vinni.</p>',
      order: 1,
      category: 'Karbantartás',
      createdAt: '',
      updatedAt: '',
      publishedAt: '',
    },
    {
      id: 2,
      documentId: 'faq-2',
      question: 'Hogyan válasszam ki a megfelelő tűzoltó készüléket?',
      answer: '<p>A választás függ a védendő terület méretétől és a várható tűzosztálytól. Irodákhoz és lakásokhoz 6 kg-os ABC poroltó ajánlott. Konyhai használatra habbal oltó készülék javasolt.</p>',
      order: 2,
      category: 'Termékinformáció',
      createdAt: '',
      updatedAt: '',
      publishedAt: '',
    },
    {
      id: 3,
      documentId: 'faq-3',
      question: 'Szállítanak Budapesten kívülre is?',
      answer: '<p>Igen, Magyarország teljes területére vállalunk szállítást. A szállítási költség a megrendelés súlyától függ.</p>',
      order: 3,
      category: 'Szállítás',
      createdAt: '',
      updatedAt: '',
      publishedAt: '',
    },
    {
      id: 4,
      documentId: 'faq-4',
      question: 'Hogyan igényelhetek árajánlatot nagyobb mennyiségre?',
      answer: '<p>Nagyobb mennyiségű rendeléshez használja az <a href="/ajanlatkeres">Árajánlat kérés</a> oldalt, ahol megadhatja a kívánt termékeket és mennyiségeket.</p>',
      order: 4,
      category: 'Rendelés',
      createdAt: '',
      updatedAt: '',
      publishedAt: '',
    },
  ];

  const hasCategories = displayFaqs.some(faq => faq.category);

  return (
    <main className="container mx-auto px-4 py-8 max-w-4xl">
      <h1 className="text-3xl font-bold mb-8">Gyakran Ismételt Kérdések</h1>

      <p className="text-muted-foreground mb-8">
        Itt találja a leggyakrabban feltett kérdésekre adott válaszainkat.
        Ha nem találja a keresett információt, kérjük vegye fel velünk a kapcsolatot.
      </p>

      <FAQAccordion faqs={displayFaqs} groupByCategory={hasCategories} />

      <div className="mt-12 p-6 bg-muted rounded-lg">
        <h2 className="text-lg font-semibold mb-2">Nem találta a választ?</h2>
        <p className="text-muted-foreground mb-4">
          Írjon nekünk és kollégáink készséggel segítenek.
        </p>
        <a
          href="/kapcsolat"
          className="inline-flex items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90"
        >
          Kapcsolatfelvétel
        </a>
      </div>
    </main>
  );
}
```
  </action>
  <verify>
    - Page loads at /gyik
    - FAQs displayed in accordion
    - Fallback content if CMS empty
    - Link to contact page
  </verify>
  <done>FAQ page created</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. FAQ page accessible at /gyik
2. Accordion expands/collapses questions
3. Categories group FAQs when present
4. Fallback FAQs display if CMS empty

Requirements completed:
- CONT-05: FAQ page with accordion
</verification>

<success_criteria>
- /gyik page displays FAQ content
- Accordion interaction works
- Categories group FAQs
- Fallback content in Hungarian
</success_criteria>
