---
phase: 09-content-polish
plan: 02
type: execute
wave: 2
depends_on: [09-01]
files_modified:
  - apps/web/src/lib/content-api.ts
  - apps/web/src/app/[locale]/[slug]/page.tsx
  - apps/web/src/app/[locale]/rolunk/page.tsx
  - apps/web/src/app/[locale]/adatvedelem/page.tsx
  - apps/web/src/app/[locale]/aszf/page.tsx
  - apps/web/src/app/[locale]/visszaterites/page.tsx
autonomous: true

must_haves:
  truths:
    - "About page exists at /rolunk"
    - "Privacy page exists at /adatvedelem"
    - "Terms page exists at /aszf"
    - "Refund page exists at /visszaterites"
    - "Pages fetch content from Strapi"
  artifacts:
    - path: "apps/web/src/app/[locale]/rolunk/page.tsx"
      provides: "About page"
      contains: "Rólunk"
---

<objective>
Create static content pages that fetch from Strapi CMS.

Purpose: CONT-04 (About), CONT-07 (Privacy), CONT-08 (Terms), CONT-09 (Refund).

Output: Four content pages with CMS-managed content.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Create content API client</name>
  <files>
    apps/web/src/lib/content-api.ts
  </files>
  <action>
Create content API client at `apps/web/src/lib/content-api.ts`:

```typescript
const STRAPI_URL = process.env.STRAPI_URL || 'http://localhost:1337';

export interface SEO {
  metaTitle?: string;
  metaDescription?: string;
  metaImage?: {
    url: string;
  };
  keywords?: string;
}

export interface Page {
  id: number;
  documentId: string;
  title: string;
  slug: string;
  content?: string;
  seo?: SEO;
  createdAt: string;
  updatedAt: string;
  publishedAt: string;
}

export interface FAQ {
  id: number;
  documentId: string;
  question: string;
  answer: string;
  order: number;
  category?: string;
  createdAt: string;
  updatedAt: string;
  publishedAt: string;
}

export async function getPageBySlug(slug: string): Promise<Page | null> {
  try {
    const params = new URLSearchParams({
      'filters[slug][$eq]': slug,
      'populate': 'seo.metaImage',
    });

    const response = await fetch(`${STRAPI_URL}/api/pages?${params}`, {
      next: { revalidate: 60 },
    });

    if (!response.ok) return null;

    const json = await response.json();
    return json.data?.[0] || null;
  } catch {
    return null;
  }
}

export async function getFAQs(): Promise<FAQ[]> {
  try {
    const params = new URLSearchParams({
      'sort': 'order:asc',
      'pagination[limit]': '100',
    });

    const response = await fetch(`${STRAPI_URL}/api/faqs?${params}`, {
      next: { revalidate: 60 },
    });

    if (!response.ok) return [];

    const json = await response.json();
    return json.data || [];
  } catch {
    return [];
  }
}
```
  </action>
  <verify>
    - getPageBySlug fetches page by slug
    - getFAQs fetches all FAQs sorted by order
    - SEO populated with image
  </verify>
  <done>Content API client created</done>
</task>

<task type="auto">
  <name>Task 2: Create About page</name>
  <files>
    apps/web/src/app/[locale]/rolunk/page.tsx
  </files>
  <action>
Create About page at `apps/web/src/app/[locale]/rolunk/page.tsx`:

```typescript
import { notFound } from 'next/navigation';
import { getPageBySlug } from '@/lib/content-api';
import type { Metadata } from 'next';

export async function generateMetadata(): Promise<Metadata> {
  const page = await getPageBySlug('rolunk');

  return {
    title: page?.seo?.metaTitle || page?.title || 'Rólunk | CSZ Tűzvédelem',
    description: page?.seo?.metaDescription || 'Ismerje meg a CSZ Tűzvédelmi Kft.-t',
  };
}

export default async function AboutPage() {
  const page = await getPageBySlug('rolunk');

  // Show fallback content if page not in CMS yet
  const content = page?.content || `
    <h2>A CSZ Tűzvédelmi Kft.</h2>
    <p>Cégünk több mint 20 éve foglalkozik tűzvédelmi eszközök forgalmazásával és karbantartásával.</p>
    <p>Fő tevékenységeink:</p>
    <ul>
      <li>Tűzoltó készülékek értékesítése</li>
      <li>Tűzvédelmi felszerelések</li>
      <li>Karbantartási szolgáltatások</li>
      <li>Szakmai tanácsadás</li>
    </ul>
    <p>Célunk, hogy ügyfeleink számára a legmagasabb minőségű tűzvédelmi megoldásokat biztosítsuk.</p>
  `;

  return (
    <main className="container mx-auto px-4 py-8 max-w-4xl">
      <h1 className="text-3xl font-bold mb-8">{page?.title || 'Rólunk'}</h1>
      <div
        className="prose prose-lg max-w-none [&>h2]:text-2xl [&>h2]:font-semibold [&>h2]:mt-8 [&>h2]:mb-4 [&>p]:mb-4 [&>ul]:mb-4 [&>ul]:list-disc [&>ul]:pl-6"
        dangerouslySetInnerHTML={{ __html: content }}
      />
    </main>
  );
}
```
  </action>
  <verify>
    - Page fetches content from CMS
    - Fallback content if not in CMS
    - SEO metadata from CMS
  </verify>
  <done>About page created</done>
</task>

<task type="auto">
  <name>Task 3: Create Privacy Policy page</name>
  <files>
    apps/web/src/app/[locale]/adatvedelem/page.tsx
  </files>
  <action>
Create Privacy page at `apps/web/src/app/[locale]/adatvedelem/page.tsx`:

```typescript
import { getPageBySlug } from '@/lib/content-api';
import type { Metadata } from 'next';

export async function generateMetadata(): Promise<Metadata> {
  const page = await getPageBySlug('adatvedelem');

  return {
    title: page?.seo?.metaTitle || 'Adatvédelmi tájékoztató | CSZ Tűzvédelem',
    description: page?.seo?.metaDescription || 'Adatvédelmi irányelvek és személyes adatok kezelése',
  };
}

export default async function PrivacyPage() {
  const page = await getPageBySlug('adatvedelem');

  const content = page?.content || `
    <h2>Adatvédelmi tájékoztató</h2>
    <p>Utoljára frissítve: 2026. január</p>

    <h3>1. Bevezetés</h3>
    <p>A CSZ Tűzvédelmi Kft. elkötelezett az Ön személyes adatainak védelme mellett.</p>

    <h3>2. Milyen adatokat gyűjtünk</h3>
    <ul>
      <li>Név és elérhetőségi adatok</li>
      <li>Szállítási és számlázási cím</li>
      <li>Vásárlási előzmények</li>
    </ul>

    <h3>3. Adatok felhasználása</h3>
    <p>Adatait kizárólag a megrendelések teljesítésére és ügyfélszolgálati célokra használjuk.</p>

    <h3>4. Kapcsolat</h3>
    <p>Adatvédelmi kérdésekkel kapcsolatban: info@csz-tuzvedelmi.hu</p>
  `;

  return (
    <main className="container mx-auto px-4 py-8 max-w-4xl">
      <h1 className="text-3xl font-bold mb-8">{page?.title || 'Adatvédelmi tájékoztató'}</h1>
      <div
        className="prose prose-lg max-w-none [&>h2]:text-2xl [&>h2]:font-semibold [&>h2]:mt-8 [&>h2]:mb-4 [&>h3]:text-xl [&>h3]:font-semibold [&>h3]:mt-6 [&>h3]:mb-3 [&>p]:mb-4 [&>ul]:mb-4 [&>ul]:list-disc [&>ul]:pl-6"
        dangerouslySetInnerHTML={{ __html: content }}
      />
    </main>
  );
}
```
  </action>
  <verify>
    - Privacy page with CMS content
    - Fallback Hungarian content
  </verify>
  <done>Privacy page created</done>
</task>

<task type="auto">
  <name>Task 4: Create Terms page</name>
  <files>
    apps/web/src/app/[locale]/aszf/page.tsx
  </files>
  <action>
Create Terms page at `apps/web/src/app/[locale]/aszf/page.tsx`:

```typescript
import { getPageBySlug } from '@/lib/content-api';
import type { Metadata } from 'next';

export async function generateMetadata(): Promise<Metadata> {
  const page = await getPageBySlug('aszf');

  return {
    title: page?.seo?.metaTitle || 'Általános Szerződési Feltételek | CSZ Tűzvédelem',
    description: page?.seo?.metaDescription || 'Vásárlási feltételek és szabályzat',
  };
}

export default async function TermsPage() {
  const page = await getPageBySlug('aszf');

  const content = page?.content || `
    <h2>Általános Szerződési Feltételek</h2>
    <p>Érvényes: 2026. január 1-től</p>

    <h3>1. Általános rendelkezések</h3>
    <p>Jelen ÁSZF a CSZ Tűzvédelmi Kft. webáruházában történő vásárlás feltételeit szabályozza.</p>

    <h3>2. Megrendelés</h3>
    <p>A megrendelés a kosárba helyezett termékek megvásárlásával jön létre.</p>

    <h3>3. Fizetési módok</h3>
    <ul>
      <li>Bankkártya (Stripe)</li>
      <li>Banki átutalás</li>
    </ul>

    <h3>4. Szállítás</h3>
    <p>Szállítás kizárólag Magyarország területére.</p>

    <h3>5. Kapcsolat</h3>
    <p>CSZ Tűzvédelmi Kft. - info@csz-tuzvedelmi.hu</p>
  `;

  return (
    <main className="container mx-auto px-4 py-8 max-w-4xl">
      <h1 className="text-3xl font-bold mb-8">{page?.title || 'Általános Szerződési Feltételek'}</h1>
      <div
        className="prose prose-lg max-w-none [&>h2]:text-2xl [&>h2]:font-semibold [&>h2]:mt-8 [&>h2]:mb-4 [&>h3]:text-xl [&>h3]:font-semibold [&>h3]:mt-6 [&>h3]:mb-3 [&>p]:mb-4 [&>ul]:mb-4 [&>ul]:list-disc [&>ul]:pl-6"
        dangerouslySetInnerHTML={{ __html: content }}
      />
    </main>
  );
}
```
  </action>
  <verify>
    - Terms page with CMS content
    - Fallback Hungarian content
  </verify>
  <done>Terms page created</done>
</task>

<task type="auto">
  <name>Task 5: Create Refund page</name>
  <files>
    apps/web/src/app/[locale]/visszaterites/page.tsx
  </files>
  <action>
Create Refund page at `apps/web/src/app/[locale]/visszaterites/page.tsx`:

```typescript
import { getPageBySlug } from '@/lib/content-api';
import type { Metadata } from 'next';

export async function generateMetadata(): Promise<Metadata> {
  const page = await getPageBySlug('visszaterites');

  return {
    title: page?.seo?.metaTitle || 'Visszatérítési szabályzat | CSZ Tűzvédelem',
    description: page?.seo?.metaDescription || 'Elállási jog és visszatérítési feltételek',
  };
}

export default async function RefundPage() {
  const page = await getPageBySlug('visszaterites');

  const content = page?.content || `
    <h2>Visszatérítési szabályzat</h2>

    <h3>Elállási jog</h3>
    <p>A fogyasztó a szerződéstől a termék kézhezvételétől számított 14 napon belül indokolás nélkül elállhat.</p>

    <h3>Elállási nyilatkozat</h3>
    <p>Az elállási szándékát egyértelmű nyilatkozattal jelezheti e-mailben vagy postai úton.</p>

    <h3>Visszaküldés</h3>
    <ul>
      <li>A terméket eredeti állapotában kell visszaküldeni</li>
      <li>A visszaküldés költsége a vásárlót terheli</li>
      <li>Sérült vagy használt termék nem fogadható vissza</li>
    </ul>

    <h3>Visszatérítés</h3>
    <p>A visszatérítés a termék visszaérkezésétől számított 14 napon belül történik, az eredeti fizetési módon.</p>

    <h3>Kapcsolat</h3>
    <p>Visszatérítéssel kapcsolatos kérdések: info@csz-tuzvedelmi.hu</p>
  `;

  return (
    <main className="container mx-auto px-4 py-8 max-w-4xl">
      <h1 className="text-3xl font-bold mb-8">{page?.title || 'Visszatérítési szabályzat'}</h1>
      <div
        className="prose prose-lg max-w-none [&>h2]:text-2xl [&>h2]:font-semibold [&>h2]:mt-8 [&>h2]:mb-4 [&>h3]:text-xl [&>h3]:font-semibold [&>h3]:mt-6 [&>h3]:mb-3 [&>p]:mb-4 [&>ul]:mb-4 [&>ul]:list-disc [&>ul]:pl-6"
        dangerouslySetInnerHTML={{ __html: content }}
      />
    </main>
  );
}
```
  </action>
  <verify>
    - Refund page with CMS content
    - Fallback Hungarian content
  </verify>
  <done>Refund page created</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. All four pages accessible
2. Content fetched from Strapi when available
3. Fallback content displays in Hungarian
4. SEO metadata from CMS

Requirements completed:
- CONT-04: About page
- CONT-07: Privacy Policy page
- CONT-08: Terms and Conditions page
- CONT-09: Refund Policy page
</verification>

<success_criteria>
- /rolunk page displays About content
- /adatvedelem page displays Privacy Policy
- /aszf page displays Terms
- /visszaterites page displays Refund Policy
- All content in Hungarian
- CMS content overrides fallback when available
</success_criteria>
