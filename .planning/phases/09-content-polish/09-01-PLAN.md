---
phase: 09-content-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/cms/src/components/shared/seo.json
  - apps/cms/src/api/page/content-types/page/schema.json
  - apps/cms/src/api/page/controllers/page.ts
  - apps/cms/src/api/page/services/page.ts
  - apps/cms/src/api/page/routes/page.ts
  - apps/cms/src/api/faq/content-types/faq/schema.json
  - apps/cms/src/api/faq/controllers/faq.ts
  - apps/cms/src/api/faq/services/faq.ts
  - apps/cms/src/api/faq/routes/faq.ts
autonomous: true

must_haves:
  truths:
    - "Page content type exists in Strapi"
    - "FAQ content type exists in Strapi"
    - "SEO component exists for metadata"
    - "Content Manager can edit pages"
  artifacts:
    - path: "apps/cms/src/api/page/content-types/page/schema.json"
      provides: "Page content type"
      contains: "page"
    - path: "apps/cms/src/api/faq/content-types/faq/schema.json"
      provides: "FAQ content type"
      contains: "faq"
---

<objective>
Create Page and FAQ content types with SEO component for CMS-managed content.

Purpose: ADMN-23 (edit CMS pages), ADMN-25 (manage SEO metadata). Foundation for content pages.

Output: Page and FAQ content types ready for content entry.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Create SEO component</name>
  <files>
    apps/cms/src/components/shared/seo.json
  </files>
  <action>
Create SEO component directory and schema.

Create directory: `apps/cms/src/components/shared/`

Create `apps/cms/src/components/shared/seo.json`:

```json
{
  "collectionName": "components_shared_seos",
  "info": {
    "displayName": "SEO",
    "icon": "search",
    "description": "SEO metadata for pages"
  },
  "attributes": {
    "metaTitle": {
      "type": "string",
      "maxLength": 60
    },
    "metaDescription": {
      "type": "text",
      "maxLength": 160
    },
    "metaImage": {
      "type": "media",
      "multiple": false,
      "allowedTypes": ["images"]
    },
    "keywords": {
      "type": "string",
      "maxLength": 255
    }
  }
}
```
  </action>
  <verify>
    - SEO component schema created
    - All meta fields present
  </verify>
  <done>SEO component created</done>
</task>

<task type="auto">
  <name>Task 2: Create Page content type</name>
  <files>
    apps/cms/src/api/page/content-types/page/schema.json
    apps/cms/src/api/page/controllers/page.ts
    apps/cms/src/api/page/services/page.ts
    apps/cms/src/api/page/routes/page.ts
  </files>
  <action>
Create Page content type directory structure.

Create `apps/cms/src/api/page/content-types/page/schema.json`:

```json
{
  "kind": "collectionType",
  "collectionName": "pages",
  "info": {
    "singularName": "page",
    "pluralName": "pages",
    "displayName": "Page",
    "description": "Static content pages"
  },
  "options": {
    "draftAndPublish": true
  },
  "attributes": {
    "title": {
      "type": "string",
      "required": true,
      "maxLength": 255
    },
    "slug": {
      "type": "uid",
      "targetField": "title",
      "required": true
    },
    "content": {
      "type": "richtext"
    },
    "seo": {
      "type": "component",
      "component": "shared.seo"
    }
  }
}
```

Create `apps/cms/src/api/page/controllers/page.ts`:

```typescript
import { factories } from '@strapi/strapi';

export default factories.createCoreController('api::page.page');
```

Create `apps/cms/src/api/page/services/page.ts`:

```typescript
import { factories } from '@strapi/strapi';

export default factories.createCoreService('api::page.page');
```

Create `apps/cms/src/api/page/routes/page.ts`:

```typescript
import { factories } from '@strapi/strapi';

export default factories.createCoreRouter('api::page.page');
```
  </action>
  <verify>
    - Page schema with title, slug, content, seo
    - Controller, service, routes created
  </verify>
  <done>Page content type created</done>
</task>

<task type="auto">
  <name>Task 3: Create FAQ content type</name>
  <files>
    apps/cms/src/api/faq/content-types/faq/schema.json
    apps/cms/src/api/faq/controllers/faq.ts
    apps/cms/src/api/faq/services/faq.ts
    apps/cms/src/api/faq/routes/faq.ts
  </files>
  <action>
Create FAQ content type directory structure.

Create `apps/cms/src/api/faq/content-types/faq/schema.json`:

```json
{
  "kind": "collectionType",
  "collectionName": "faqs",
  "info": {
    "singularName": "faq",
    "pluralName": "faqs",
    "displayName": "FAQ",
    "description": "Frequently asked questions"
  },
  "options": {
    "draftAndPublish": true
  },
  "attributes": {
    "question": {
      "type": "string",
      "required": true,
      "maxLength": 500
    },
    "answer": {
      "type": "richtext",
      "required": true
    },
    "order": {
      "type": "integer",
      "default": 0
    },
    "category": {
      "type": "string",
      "maxLength": 100
    }
  }
}
```

Create `apps/cms/src/api/faq/controllers/faq.ts`:

```typescript
import { factories } from '@strapi/strapi';

export default factories.createCoreController('api::faq.faq');
```

Create `apps/cms/src/api/faq/services/faq.ts`:

```typescript
import { factories } from '@strapi/strapi';

export default factories.createCoreService('api::faq.faq');
```

Create `apps/cms/src/api/faq/routes/faq.ts`:

```typescript
import { factories } from '@strapi/strapi';

export default factories.createCoreRouter('api::faq.faq');
```
  </action>
  <verify>
    - FAQ schema with question, answer, order, category
    - Controller, service, routes created
  </verify>
  <done>FAQ content type created</done>
</task>

<task type="auto">
  <name>Task 4: Build and configure permissions</name>
  <files>none</files>
  <action>
Build CMS to verify content types:

```bash
pnpm --filter @csz/cms build
```

After build, configure permissions in Strapi admin:
1. Settings > Users & Permissions > Roles > Public
2. Enable find and findOne for Page and FAQ
3. Save permissions
  </action>
  <verify>
    - CMS builds successfully
    - Page and FAQ appear in Content Manager
    - Public API access configured
  </verify>
  <done>Build and permissions complete</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Page content type in Strapi with SEO component
2. FAQ content type in Strapi
3. Content Manager can create/edit pages
4. Public API access for pages and FAQs

Requirements started:
- ADMN-23: Content manager can edit CMS pages
- ADMN-25: Content manager can manage SEO metadata
</verification>

<success_criteria>
- Page content type with title, slug, content, seo
- FAQ content type with question, answer, order
- SEO component with metaTitle, metaDescription, metaImage
- CMS builds successfully
- Content types visible in admin
</success_criteria>
