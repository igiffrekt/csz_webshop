---
phase: 03-frontend-shell
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - apps/web/src/components/layout/Header.tsx
  - apps/web/src/components/layout/Footer.tsx
  - apps/web/src/components/layout/MobileNav.tsx
  - apps/web/src/components/layout/Logo.tsx
  - apps/web/src/app/[locale]/layout.tsx
  - apps/web/src/app/[locale]/page.tsx
  - apps/web/src/components/home/HeroSection.tsx
  - apps/web/src/components/home/FeaturedProducts.tsx
  - apps/web/src/components/home/CategoryGrid.tsx
  - apps/web/src/components/product/ProductCard.tsx
  - apps/web/src/messages/hu.json
autonomous: true

must_haves:
  truths:
    - "User can see consistent header and footer on all pages"
    - "User can navigate via header links"
    - "Mobile users can access navigation menu"
    - "Home page displays hero section"
    - "Home page shows featured products"
    - "Home page shows category grid"
  artifacts:
    - path: "apps/web/src/components/layout/Header.tsx"
      provides: "Site header with navigation"
      min_lines: 40
    - path: "apps/web/src/components/layout/Footer.tsx"
      provides: "Site footer with links"
      min_lines: 30
    - path: "apps/web/src/components/home/HeroSection.tsx"
      provides: "Home page hero banner"
      min_lines: 20
    - path: "apps/web/src/components/product/ProductCard.tsx"
      provides: "Product card for grids"
      min_lines: 30
  key_links:
    - from: "apps/web/src/app/[locale]/layout.tsx"
      to: "Header, Footer components"
      via: "import and render in layout"
      pattern: "import.*Header.*Footer"
    - from: "apps/web/src/app/[locale]/page.tsx"
      to: "getCategories, getFeaturedProducts"
      via: "Server Component async fetch"
      pattern: "await.*get(Categories|FeaturedProducts)"
---

<objective>
Create the visual shell of the webshop - Header, Footer, MobileNav components - and build the home page with hero section, featured products grid, and category navigation.

Purpose: Users can land on the home page and see the webshop brand, navigate to product categories, and discover featured fire safety products.

Output: Complete home page with responsive layout shell, ready for product listing and detail pages.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-frontend-shell/03-RESEARCH.md
@.planning/phases/03-frontend-shell/03-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create layout shell components</name>
  <files>
    apps/web/src/components/layout/Logo.tsx
    apps/web/src/components/layout/Header.tsx
    apps/web/src/components/layout/Footer.tsx
    apps/web/src/components/layout/MobileNav.tsx
    apps/web/src/app/[locale]/layout.tsx
    apps/web/src/messages/hu.json
  </files>
  <action>
Create the layout components for the site shell.

**Logo.tsx (Server Component):**
- Simple text logo "CSZ" with fire safety equipment tagline
- Link to home page "/"
- Use Tailwind for styling (bold, brand color)

**Header.tsx (Server Component with Client navigation):**
- Fixed/sticky header with white background
- Logo on left
- Main navigation links: Termékek, Kategóriák, Kapcsolat
- Cart icon placeholder (will be functional in Phase 4)
- Search icon/trigger placeholder (will open search modal)
- Mobile menu trigger (hamburger) visible on small screens
- Use shadcn/ui components where appropriate

**MobileNav.tsx (Client Component):**
- 'use client' directive
- Slide-in drawer from left or bottom
- Same navigation links as Header
- Close button
- Uses motion for slide animation (optional, can be CSS)
- Controlled by state from Header trigger

**Footer.tsx (Server Component):**
- Three-column layout on desktop, stacked on mobile
- Column 1: Logo + short description
- Column 2: Quick links (Termékek, Kategóriák, GYIK, Kapcsolat)
- Column 3: Contact info placeholder (address, phone, email)
- Copyright line at bottom with current year
- All text in Hungarian

**Update layout.tsx:**
- Import Header and Footer
- Render Header at top, Footer at bottom
- Main content area with proper min-height (flex layout)
- Pass any necessary context providers

**Update hu.json with new strings:**
```json
{
  "nav": {
    "products": "Termékek",
    "categories": "Kategóriák",
    "contact": "Kapcsolat",
    "faq": "GYIK",
    "cart": "Kosár",
    "search": "Keresés"
  },
  "footer": {
    "description": "Minőségi tűzvédelmi eszközök szakértőktől",
    "quickLinks": "Gyors linkek",
    "contactUs": "Kapcsolat",
    "copyright": "© {year} CSZ Webshop. Minden jog fenntartva."
  }
}
```
  </action>
  <verify>
1. Run `pnpm dev:web`
2. Header appears at top with logo and navigation links
3. Footer appears at bottom with three columns
4. Resize browser - layout is responsive
5. Mobile menu trigger appears on small screens
6. Click mobile trigger - navigation drawer opens
  </verify>
  <done>Header with navigation, Footer with links, MobileNav drawer all render correctly and are responsive</done>
</task>

<task type="auto">
  <name>Task 2: Create ProductCard and home page sections</name>
  <files>
    apps/web/src/components/product/ProductCard.tsx
    apps/web/src/components/home/HeroSection.tsx
    apps/web/src/components/home/FeaturedProducts.tsx
    apps/web/src/components/home/CategoryGrid.tsx
    apps/web/src/messages/hu.json
  </files>
  <action>
Create the building blocks for the home page.

**ProductCard.tsx (Server Component):**
- Props: product (Product type from @csz/types)
- Display product image (use next/image with fill + sizes)
- Product name
- Price with formatPrice() - show compareAtPrice with strikethrough if exists
- "On sale" badge if isOnSale true
- Certification badges (CE icon) if certifications exist
- Link to product detail page: `/termekek/${product.slug}`
- Hover effect: subtle scale or shadow
- Use Tailwind for all styling

**HeroSection.tsx (Server Component):**
- Full-width banner with background (gradient or image placeholder)
- Main headline: "Tűzvédelmi eszközök szakértőktől" (Fire safety equipment from experts)
- Subheadline: Brief value proposition about quality and certification
- CTA button linking to /termekek
- Responsive: adjust text size and padding for mobile
- Height: 60-80vh on desktop, smaller on mobile

**FeaturedProducts.tsx (Server Component):**
- Props: products (Product[])
- Section title: "Kiemelt termékeink" (Our featured products)
- Grid of ProductCard components (4 columns on desktop, 2 on tablet, 1 on mobile)
- "View all products" link at bottom

**CategoryGrid.tsx (Server Component):**
- Props: categories (Category[])
- Section title: "Kategóriák" (Categories)
- Grid of category cards (3 columns on desktop)
- Each card: category image (or placeholder), name, product count if available
- Link to category page: `/kategoriak/${category.slug}`

**Update hu.json:**
```json
{
  "home": {
    "hero": {
      "title": "Tűzvédelmi eszközök szakértőktől",
      "subtitle": "Minősített poroltók, tűzjelzők és biztonsági felszerelések széles választéka",
      "cta": "Termékek megtekintése"
    },
    "featured": {
      "title": "Kiemelt termékeink",
      "viewAll": "Összes termék megtekintése"
    },
    "categories": {
      "title": "Kategóriák"
    }
  },
  "product": {
    "onSale": "Akció",
    "outOfStock": "Nincs készleten"
  }
}
```
  </action>
  <verify>
1. Import and render ProductCard with mock data in page.tsx - card displays correctly
2. Import HeroSection - banner appears with headline and CTA
3. Check all components are responsive at different viewport sizes
4. Verify Next.js Image component uses correct sizes prop for responsive images
  </verify>
  <done>ProductCard, HeroSection, FeaturedProducts, and CategoryGrid components render with correct styling</done>
</task>

<task type="auto">
  <name>Task 3: Assemble home page with real data</name>
  <files>
    apps/web/src/app/[locale]/page.tsx
    apps/web/src/lib/api.ts
  </files>
  <action>
Wire up the home page to fetch real data from Strapi and render all sections.

**Update page.tsx:**
```typescript
import { getCategories, getFeaturedProducts } from '@/lib/api';
import { HeroSection } from '@/components/home/HeroSection';
import { FeaturedProducts } from '@/components/home/FeaturedProducts';
import { CategoryGrid } from '@/components/home/CategoryGrid';

export default async function HomePage() {
  // Fetch data in parallel
  const [categoriesResponse, featuredResponse] = await Promise.all([
    getCategories(),
    getFeaturedProducts(),
  ]);

  return (
    <main>
      <HeroSection />
      <section className="container mx-auto px-4 py-12">
        <FeaturedProducts products={featuredResponse.data} />
      </section>
      <section className="container mx-auto px-4 py-12 bg-gray-50">
        <CategoryGrid categories={categoriesResponse.data} />
      </section>
    </main>
  );
}
```

**Add getFeaturedProducts to api.ts if not already:**
```typescript
export async function getFeaturedProducts(): Promise<StrapiListResponse<Product>> {
  return getProducts({ featured: true, pageSize: 8 });
}
```

**Add getCategories to api.ts:**
```typescript
export async function getCategories(): Promise<StrapiListResponse<Category>> {
  const query = qs.stringify({
    populate: {
      image: { fields: ['url', 'alternativeText', 'width', 'height'] },
      children: { fields: ['name', 'slug'] },
    },
    filters: {
      parent: { id: { $null: true } }, // Only top-level categories
    },
    sort: ['name:asc'],
  }, { encodeValuesOnly: true });

  const res = await fetch(`${STRAPI_URL}/api/categories?${query}`, {
    next: { revalidate: 60 },
  });

  if (!res.ok) {
    throw new Error(`Failed to fetch categories: ${res.status}`);
  }

  return res.json();
}
```

**Handle empty states:**
- If no featured products, hide FeaturedProducts section
- If no categories, hide CategoryGrid section
- Or show appropriate "Coming soon" message

**Add error boundaries:**
- Wrap each section in try/catch or use React error boundaries
- Show graceful fallback if API fails
  </action>
  <verify>
1. Start Strapi with `pnpm dev:cms` (requires db:start first)
2. Add at least one product in Strapi marked as featured
3. Add at least one category in Strapi
4. Run `pnpm dev:web`
5. Home page loads with:
   - Hero section visible
   - Featured products grid showing the product from Strapi
   - Category grid showing categories from Strapi
6. Check Network tab - API calls succeed with 200 status
  </verify>
  <done>Home page fetches and displays real products and categories from Strapi API</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Navigate to http://localhost:3000/hu
2. Header visible with navigation links (Termékek, Kategóriák, Kapcsolat)
3. Hero section displays with headline and CTA button
4. Featured products section shows products from Strapi (or empty state)
5. Category grid shows categories from Strapi (or empty state)
6. Footer visible with links and copyright
7. Mobile: hamburger menu works, layout is responsive
8. All text displays in Hungarian
9. Prices formatted as "15 900 Ft" (no decimals, space separator)
</verification>

<success_criteria>
- Layout shell (Header, Footer, MobileNav) renders on all pages
- Home page has hero section with Hungarian copy
- Featured products display from Strapi API with correct formatting
- Category grid displays categories from Strapi API
- Site is fully responsive (mobile, tablet, desktop)
- No console errors or hydration warnings
</success_criteria>

<output>
After completion, create `.planning/phases/03-frontend-shell/03-02-SUMMARY.md`
</output>
