---
phase: 10-design-migration-launch
plan: 04
type: implement
wave: 2
depends_on: [10-01]
files_modified:
  - apps/web/src/components/home/CategoryGrid.tsx
autonomous: true

must_haves:
  truths:
    - "Category blocks with images"
    - "Links to category pages"
  artifacts:
    - apps/web/src/components/home/CategoryGrid.tsx
---

<objective>
Create category grid section for home page.

Purpose: Visual category navigation matching reference design.

Output: Category grid with images and item counts.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Create CategoryGrid component</name>
  <files>
    apps/web/src/components/home/CategoryGrid.tsx
  </files>
  <action>
Create category grid with visual blocks:

```tsx
import Image from 'next/image';
import { Link } from '@/i18n/navigation';
import { ArrowRight } from 'lucide-react';
import type { Category } from '@csz/types';

interface CategoryGridProps {
  categories: Category[];
}

export function CategoryGrid({ categories }: CategoryGridProps) {
  // Take top 6 categories or use defaults
  const displayCategories = categories.length > 0
    ? categories.slice(0, 6)
    : defaultCategories;

  return (
    <section className="section bg-white">
      <div className="container mx-auto px-4">
        {/* Section header */}
        <div className="section-header">
          <span className="text-primary-500 font-medium text-sm uppercase tracking-wide">
            Kategóriák
          </span>
          <h2 className="section-title">Böngésszen kategóriák szerint</h2>
          <p className="section-subtitle max-w-2xl mx-auto">
            Fedezze fel tűzvédelmi termékkínálatunkat
          </p>
        </div>

        {/* Category grid */}
        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
          {displayCategories.map((category, index) => (
            <CategoryCard
              key={category.slug}
              category={category}
              featured={index < 2}
            />
          ))}
        </div>

        {/* View all link */}
        <div className="text-center mt-8">
          <Link
            href="/kategoriak"
            className="inline-flex items-center gap-2 text-primary-500 font-medium hover:text-primary-600 transition-colors"
          >
            Összes kategória
            <ArrowRight className="h-4 w-4" />
          </Link>
        </div>
      </div>
    </section>
  );
}

function CategoryCard({
  category,
  featured = false,
}: {
  category: Category;
  featured?: boolean;
}) {
  const imageUrl = category.image?.url
    ? `${process.env.NEXT_PUBLIC_STRAPI_URL || ''}${category.image.url}`
    : null;

  return (
    <Link
      href={`/kategoriak/${category.slug}`}
      className={`
        group relative overflow-hidden rounded-xl bg-secondary-100
        ${featured ? 'md:col-span-2 lg:col-span-3 aspect-[2/1]' : 'aspect-square'}
      `}
    >
      {/* Background image */}
      {imageUrl ? (
        <Image
          src={imageUrl}
          alt={category.name}
          fill
          className="object-cover transition-transform duration-500 group-hover:scale-105"
        />
      ) : (
        <div className="absolute inset-0 bg-gradient-to-br from-primary-100 to-primary-200" />
      )}

      {/* Overlay */}
      <div className="absolute inset-0 bg-gradient-to-t from-secondary-900/80 via-secondary-900/20 to-transparent" />

      {/* Content */}
      <div className="absolute bottom-0 left-0 right-0 p-4">
        <h3 className="text-white font-semibold text-lg group-hover:text-primary-400 transition-colors">
          {category.name}
        </h3>
        {category.products && (
          <p className="text-white/70 text-sm">
            {category.products.length}+ termék
          </p>
        )}
      </div>

      {/* Hover arrow */}
      <div className="absolute top-4 right-4 w-10 h-10 bg-white/20 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
        <ArrowRight className="h-5 w-5 text-white" />
      </div>
    </Link>
  );
}

// Default categories if none from API
const defaultCategories = [
  { name: 'Tűzoltó készülékek', slug: 'tuzolto-keszulekek', products: [] },
  { name: 'Tűzjelző rendszerek', slug: 'tuzjelzo-rendszerek', products: [] },
  { name: 'Poroltó készülékek', slug: 'porolto-keszulekek', products: [] },
  { name: 'CO2 oltók', slug: 'co2-oltok', products: [] },
  { name: 'Haboltó készülékek', slug: 'habolto-keszulekek', products: [] },
  { name: 'Kiegészítők', slug: 'kiegeszitok', products: [] },
] as Category[];
```
  </action>
  <verify>
    - Grid layout responsive
    - Featured categories larger
    - Hover effects work
    - Links to category pages
  </verify>
  <done>CategoryGrid created</done>
</task>

<task type="auto">
  <name>Task 2: Export CategoryGrid</name>
  <files>
    apps/web/src/components/home/index.ts
  </files>
  <action>
Add export for CategoryGrid.
  </action>
  <verify>
    - Export added
  </verify>
  <done>Export added</done>
</task>

</tasks>

<verification>
- Category grid displays correctly
- Images load from Strapi
- Hover effects smooth
- Links work
</verification>

<success_criteria>
- Categories visually match reference design
- Responsive on all screen sizes
</success_criteria>
